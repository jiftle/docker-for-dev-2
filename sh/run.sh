#!/bin/bash
# -----------------------------------------------------------------
# FileName: run.sh
# Date: 2020-01-09
# Author: jiftle
# Description: 
# -----------------------------------------------------------------
# set -e
cd ..
# å¼•ç”¨è„šæœ¬
. ./conf.conf

# --------------- å®šä¹‰å˜é‡ ------------------
GitPath="${HOME}/tg-git"
echo "------------- è¿è¡Œ[${DockerKey}:${DockerVer}]é•œåƒçš„å®¹å™¨ ------------"

echo "  |--> åˆ é™¤Dockerå®ä¾‹ï¼Œ[${ContainerName}] ..."
docker rm -f ${ContainerName}

echo "  |--> å¼€å§‹å¯åŠ¨Dockerå®ä¾‹ï¼Œ[${ContainerName}] ..."

docker run -itd \
`# æ³¨é‡Šè¯·å¿½ç•¥ï¼Œ----------- è®¾ç½®åç§° -------------` \
--name="${ContainerName}" \
`# æ³¨é‡Šè¯·å¿½ç•¥ï¼Œ----------- å·¥ä½œç›®å½•æ˜ å°„ -------------` \
-w /home/john `# é»˜è®¤å·¥ä½œç›®å½•` \
-v ${HOME}:/home/john `# é»˜è®¤å·¥ä½œç›®å½•ï¼Œæ˜ å°„` \
-v ${GitPath}:/home/john/git `# gitä»“åº“ç›®å½•` \
`# æ³¨é‡Šè¯·å¿½ç•¥ï¼Œ----------- ç”¨æˆ·å¯†é’¥ -------------` \
-v ${HOME}/.ssh:/root/.ssh `# .sshå¯†é’¥` \
`# æ³¨é‡Šè¯·å¿½ç•¥ï¼Œ----------- ç«¯å£æ˜ å°„ -------------` \
`# -p 8001:8001 # æ—¥å¿—ä»“åº“ï¼Œé¢„è§ˆæœåŠ¡` \
`# -p 8080:8080 # webç¨‹åºè°ƒè¯•ç«¯å£` \
`# æ³¨é‡Šè¯·å¿½ç•¥ï¼Œ----------- è§£å†³æ—¶åŒºé—®é¢˜ -------------` \
-h "${ContainerName}" `# æœºå™¨å` \
--restart=always `# è‡ªå¯åŠ¨ï¼Œå®¹æ˜“å¯¼è‡´æŒ‚è½½çš„åˆ†åŒºï¼Œæ™šäºdocker` \
`# é•œåƒå` \
${DockerKey}:${DockerVer}

echo "  |--> å¯åŠ¨Docker[${DockerName}]å®Œæ¯•. ^_^ğŸ˜"

